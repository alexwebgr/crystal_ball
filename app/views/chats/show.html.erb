<%= turbo_stream_from @chat %>

<div class="fixed-grid has-4-cols">
  <div class="grid">
    <div class="cell has-background-black-ter">
      <%= link_to chats_path, class: "" do %>
        <div class="is-flex is-align-items-center">
          <div class="mt-3">
            <%= image_tag "crystal_ball_200_80.png", width: 100 %>
          </div>
          <div class="">
            <h1 class="is-size-2 has-text-primary">Crystal Ball</h1>
          </div>
        </div>
      <% end %>
      <div class="px-2 py-4">
        <%= link_to "New chat", new_chat_path, class: "button is-primary is-dark is-fullwidth is-outlined" %>
      </div>

      <aside class="menu">
        <ul class="menu-list">
          <li>
            <a>Recent chats</a>
            <ul>
              <% @chats.each do |chat| %>
                <li class="mb-2">
                  <%= link_to chat, class: "#{chat.id.to_i == params[:id].to_i ? 'is-active' : ''}" do %>
                    <span id="chat_<%= chat.id %>_label"><%= chat.label || "Chat #{chat.id}" %></span>
                  <% end %>
                </li>
              <% end %>
            </ul>
          </li>
        </ul>
      </aside>
    </div>

    <div class="cell is-col-span-3">
      <div id="messages">
        <%= render @chat.messages %>
      </div>
    </div>
  </div>
</div>

<div class="ask_form" id="ask_form">
  <%= render "form", chat: @chat %>
</div>
